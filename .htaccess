# /GAEVIC/webhook/.htaccess
# Force PHP processing for this directory

# Turn on the rewrite engine
RewriteEngine On

# Set PHP handler - THIS IS CRITICAL
AddHandler application/x-httpd-php .php

# Set default file index
DirectoryIndex index.php

# Allow all request methods
<Limit GET POST PUT DELETE OPTIONS>
    Require all granted
</Limit>

# Set CORS headers
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type, Authorization, X-Event-Type, X-Case-ID, X-Source"

# Handle preflight requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# Route everything to index.php
RewriteRule ^ index.php [L]

# Increase PHP limits
php_value upload_max_filesize 50M
php_value post_max_size 50M
php_value max_execution_time 300
php_value max_input_time 300
